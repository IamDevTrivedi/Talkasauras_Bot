generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

enum WritingStyle {
  DEFAULT
  FORMAL
  DESCRIPTIVE
  CONCISE
}

enum Model {
  DEFAULT
}

enum Role {
  user
  assistant
}

model User {
  telegramIdHash String @id
  telegramIdEnc  String

  customInstructions String       @default("")
  writingStyle       WritingStyle @default(DEFAULT)
  model              Model        @default(DEFAULT)

  temporaryOn Boolean @default(false)

  keyVersion Int @default(0)

  createdAt  BigInt
  lastActive BigInt
}

model Message {
  id             String @id @default(uuid())
  telegramIdHash String

  content String
  role    Role

  isTemporary Boolean @default(false)
  createdAt   BigInt
}

model Feedback {
  id        Int     @id @default(autoincrement())
  feedback  String
  reviewed  Boolean @default(false)
  createdAt BigInt
}

model Reminder {
  id Int @id @default(autoincrement())

  telegramIdEnc String
  keyVersion    Int

  message  String
  remindAt BigInt
  executed Boolean @default(false)

  createdAt BigInt
}
